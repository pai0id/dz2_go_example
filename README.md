# Домашнее задание №4

## Задание

Разработка программы на Golang для обработки писем в формате SMTP

## Цель

Разработать программу на языке Golang для работы с письмами в формате SMTP, которая будет автоматически определять количество частей (партов) мультипарт-письма и выводить их количество.

## Краткая справка о формате SMTP

SMTP (Simple Mail Transfer Protocol) - это протокол, используемый для отправки электронной почты в сети Интернет. Он определяет способы, по которым электронные письма передаются и доставляются от отправителя к получателю через различные почтовые серверы.

Мультипарт письмо в формате SMTP - это письмо, которое содержит несколько частей или секций. Мультипарт письмо состоит из нескольких различных частей, каждая из которых может иметь свой формат и содержимое. Например, текстовая часть письма может содержать обычный текст сообщения, а другая часть может содержать HTML-версию того же сообщения для отображения в веб-почтовых клиентах. Кроме того, мультипарт письмо может включать вложения, такие как изображения, документы и другие файлы. Части письма разделены специальным разделителем, который задается в заголовке письма.

Пример такого письма:
```
From: sender@example.com
To: recipient@example.com
Subject: Test email
Content-Type: multipart/alternative; boundary=boundary42

This is a test email with multiple parts.

--boundary42
Content-Type: text/plain; charset="UTF-8"

This is the plain text part of the email.

--boundary42
Content-Type: text/html; charset="UTF-8"

<html>
<head>
<title>Test Email</title>
</head>
<body>
<p>This is the HTML part of the email.</p>
</body>
</html>

--boundary42--
```

## Задача

1. Реализуйте функции `CountParts`, `ParseEmail`;
2. Проверьте корректность функций с помощью модульных тестов.

Программа работает со письмом, хранящимся в текстовом файле:

Она принимает письмо и возвращает количество партов.

Запустить программу можно так:
    ```bash
    $ make run FILE=<filepath>
    ```

 - filepath - Файл с письмом

## Описание функций в файле parser.go:

### Функция CountParts:
Определяет количество партов в письме

Входные параметры:

 - emailText (string): Текст письма в формате SMTP

Возвращаемые значения:

 - int: Количество партов в письме

Пример использования:

```go
partsCount := CountParts(emailText)
fmt.Println("Количество партов:", partsCount)
```

### Функция ParseEmail:
Принимает в качестве аргумента текст письма в формате SMTP и парсит его для определения количества партов и их содержимого.

Входные параметры:

 - emailText (string): Текст письма в формате SMTP

Возвращаемые значения:

 - int: Количество партов в письме
 - []string: Содержимое каждой части письма в виде строкового массива

Пример использования:

```go
partsCount, partContents := ParseEmail(emailText)
fmt.Println("Количество партов:", partsCount)
fmt.Println("Содержимое:")
for i, content := range partContents {
    fmt.Printf("Парт %d: %s\n", i+1, content)
    }
```

## Запуск тестов

Запустить тесты можно так:
```bash
$ make test
```

## Полезные ссылки

Справка по мультипарт письмам - https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html
